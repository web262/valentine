<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shivam â¤ Anjali â€” AI Valentine Bot</title>
  <style>
    :root{
      --bgA:#12051e;
      --bgB:#2b0a3d;
      --pink:#ff4d88;
      --rose:#ff9bbd;
      --violet:#7c4dff;
      --mint:#32d583;
      --cyan:#6ae4ff;
      --card:rgba(255,255,255,.12);
      --card2:rgba(255,255,255,.07);
      --line:rgba(255,255,255,.18);
      --text:#ffffff;
      --muted:rgba(255,255,255,.82);
      --shadow: 0 22px 70px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(900px 650px at 15% 15%, rgba(124,77,255,.45), transparent 60%),
        radial-gradient(900px 650px at 85% 25%, rgba(255,77,136,.55), transparent 55%),
        radial-gradient(1000px 700px at 50% 110%, rgba(255,155,189,.35), transparent 55%),
        linear-gradient(135deg, var(--bgA), var(--bgB));
      overflow:hidden;
    }

    /* ===== Floating hearts & sparkles ===== */
    .fx{position:fixed; inset:0; pointer-events:none; overflow:hidden;}
    .heart{
      position:absolute;
      width:16px; height:16px;
      transform: rotate(45deg);
      opacity:.85;
      animation: floatUp var(--dur) linear infinite;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
    }
    .heart:before,.heart:after{content:""; position:absolute; width:16px; height:16px; background: var(--c); border-radius:50%;}
    .heart{background: var(--c); border-radius: 4px;}
    .heart:before{left:-8px; top:0}
    .heart:after{left:0; top:-8px}

    .spark{
      position:absolute;
      font-size: 14px;
      opacity:.9;
      animation: twinkle var(--dur) ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.22));
    }

    @keyframes floatUp{
      from{ transform: translateY(20vh) translateX(0) rotate(45deg) scale(var(--s)); }
      to{ transform: translateY(-120vh) translateX(var(--x)) rotate(45deg) scale(var(--s)); }
    }
    @keyframes twinkle{
      0%,100%{transform: translateY(0) scale(1); opacity:.35}
      50%{transform: translateY(-8px) scale(1.15); opacity:.95}
    }

    /* ===== Layout ===== */
    .wrap{height:100%; display:grid; place-items:center; padding:18px;}
    .app{
      width:min(1100px, 100%);
      height:min(760px, 92vh);
      background: linear-gradient(180deg, rgba(255,255,255,.13), rgba(255,255,255,.06));
      border: 1px solid var(--line);
      border-radius: 26px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
      display:grid;
      grid-template-rows: auto 1fr auto;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--line);
      background: rgba(0,0,0,.10);
    }

    .brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:-.02em;}
    .pill{font-size:12px; padding:6px 10px; border:1px solid rgba(255,255,255,.18); border-radius:999px; color:var(--muted); background: rgba(0,0,0,.12); white-space:nowrap;}

    .main{
      display:grid;
      grid-template-columns: 340px 1fr;
      height:100%;
      min-height:0;
    }

    /* ===== Left: Profiles + progress ===== */
    .side{
      border-right: 1px solid var(--line);
      padding: 14px;
      background: rgba(0,0,0,.08);
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height:0;
    }

    .profile{
      display:flex;
      gap:12px;
      align-items:center;
      padding: 12px;
      border-radius: 20px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
    }

    .avatar{
      width:54px; height:54px;
      border-radius: 18px;
      display:grid; place-items:center;
      position:relative;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      box-shadow: 0 10px 26px rgba(0,0,0,.22);
    }
    .avatar:before{
      content:"";
      position:absolute;
      inset:-26px;
      background: conic-gradient(from 0deg, rgba(255,77,136,.85), rgba(124,77,255,.75), rgba(106,228,255,.70), rgba(255,155,189,.85), rgba(255,77,136,.85));
      filter: blur(12px);
      opacity:.75;
      animation: spin 7s linear infinite;
    }
    .avatar > span{position:relative; font-size:28px; filter: drop-shadow(0 10px 18px rgba(0,0,0,.20));}
    @keyframes spin{to{transform:rotate(360deg)}}

    .meta{min-width:0}
    .meta .name{font-weight:900; letter-spacing:-.01em}
    .meta .desc{color:var(--muted); font-size:12px; line-height:1.45}

    .cards{display:grid; gap:10px; overflow:auto; padding-right:4px;}
    .stat{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      border-radius: 18px;
      padding: 12px;
    }
    .stat b{display:block; margin-bottom:6px}
    .stat .small{color:var(--muted); font-size:12px; line-height:1.5}

    .meter{margin-top:10px; display:flex; align-items:center; gap:10px;}
    .bar{flex:1; height:12px; border-radius:999px; border:1px solid rgba(255,255,255,.16); background: rgba(0,0,0,.16); overflow:hidden;}
    .bar i{display:block; height:100%; width:0%; background: linear-gradient(90deg, rgba(50,213,131,.9), rgba(255,77,136,.9)); border-radius:999px; transition: width .25s ease;}
    .score{font-weight:900; white-space:nowrap}

    .side-actions{display:flex; gap:10px; flex-wrap:wrap}
    .ghost{
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.12);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      font-weight:800;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
    }
    .ghost:hover{transform: translateY(-1px); background: rgba(255,255,255,.08)}

    /* ===== Right: Chat ===== */
    .chat{
      display:grid;
      grid-template-rows: auto 1fr auto;
      min-height:0;
    }

    .chat-head{
      padding: 12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-bottom: 1px solid var(--line);
      background: rgba(0,0,0,.08);
    }

    .botline{display:flex; align-items:center; gap:10px;}
    .botbadge{
      width:34px; height:34px;
      border-radius: 12px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,77,136,.18);
    }
    .status{color:var(--muted); font-size:12px}

    .msgs{
      padding: 14px;
      overflow:auto;
      min-height:0;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .msg{
      display:flex;
      gap:10px;
      align-items:flex-end;
      max-width: 92%;
      animation: pop .24s ease;
    }
    @keyframes pop{from{transform: translateY(8px); opacity:0}to{transform: translateY(0); opacity:1}}

    .msg.me{align-self:flex-end; flex-direction:row-reverse;}

    .bubble{
      padding: 12px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      line-height:1.55;
      font-size: 14px;
      position:relative;
    }
    .msg.bot .bubble{background: rgba(255,77,136,.12);}
    .msg.me .bubble{background: rgba(50,213,131,.12);}

    .stamp{font-size: 11px; color: rgba(255,255,255,.70); margin: 0 6px 4px; white-space:nowrap}

    .miniava{
      width:30px; height:30px;
      border-radius: 12px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      flex: 0 0 auto;
    }

    .typing{
      display:inline-flex;
      gap:6px;
      align-items:center;
    }
    .dot{width:7px; height:7px; border-radius:999px; background: rgba(255,255,255,.75); opacity:.55; animation: blink 1s infinite;}
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.30s}
    @keyframes blink{0%,100%{opacity:.25; transform: translateY(0)}50%{opacity:1; transform: translateY(-2px)}}

    /* ===== Choices ===== */
    .choices{
      padding: 12px 14px;
      border-top: 1px solid var(--line);
      background: rgba(0,0,0,.10);
      display:grid;
      gap:10px;
    }

    .choice-row{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}

    .btn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 900;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
      user-select:none;
      font-size: 13px;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.12)}
    .btn.good{border-color: rgba(50,213,131,.35); background: rgba(50,213,131,.14)}
    .btn.spicy{border-color: rgba(255,155,189,.45); background: rgba(255,155,189,.14)}
    .btn.danger{border-color: rgba(255,255,255,.22); background: rgba(0,0,0,.18)}

    .note{color: var(--muted); font-size: 12px; line-height:1.45}

    /* ===== Finale modal ===== */
    .modal{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.55);
      z-index: 9999;
      padding: 18px;
    }
    .modal .box{
      width:min(720px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.08));
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      backdrop-filter: blur(12px);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }
    .modal .box:before{
      content:"";
      position:absolute;
      inset:-60px;
      background: radial-gradient(circle at 20% 20%, rgba(255,77,136,.40), transparent 55%),
                  radial-gradient(circle at 80% 30%, rgba(124,77,255,.35), transparent 55%),
                  radial-gradient(circle at 50% 90%, rgba(50,213,131,.25), transparent 55%);
      filter: blur(2px);
      pointer-events:none;
    }
    .modal h2{margin:0 0 8px; font-size: 30px; letter-spacing:-.02em; position:relative}
    .modal p{margin:0 0 12px; color: var(--muted); line-height:1.6; position:relative}

    .arena{
      position:relative;
      width:min(520px, 100%);
      height: 190px;
      margin: 10px auto 0;
      border-radius: 24px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }

    .yes{
      position:absolute;
      left:50%;
      bottom: 14px;
      transform: translateX(-50%);
      padding: 12px 18px;
      border-radius: 18px;
      font-weight: 1000;
      border:1px solid rgba(50,213,131,.45);
      background: linear-gradient(135deg, rgba(50,213,131,.65), rgba(50,213,131,.25));
      cursor:pointer;
      color: var(--text);
      box-shadow: 0 14px 30px rgba(50,213,131,.18);
      user-select:none;
      z-index: 3;
    }

    .no{
      position:absolute;
      left:50%;
      top: 14px;
      transform: translateX(-50%);
      padding: 12px 18px;
      border-radius: 18px;
      font-weight: 1000;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
      cursor:pointer;
      color: var(--text);
      user-select:none;
      z-index: 2;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.48);
      border: 1px solid rgba(255,255,255,.18);
      padding: 10px 12px;
      border-radius: 999px;
      color: rgba(255,255,255,.92);
      font-size: 13px;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 10000;
      white-space:nowrap;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-2px)}

    /* ===== Responsive ===== */
    @media (max-width: 900px){
      body{overflow:auto}
      .app{height:auto; min-height: 92vh}
      .main{grid-template-columns: 1fr}
      .side{border-right:none; border-bottom:1px solid var(--line)}
    }
  </style>
</head>
<body>
  <div class="fx" id="fx" aria-hidden="true"></div>

  <div class="wrap">
    <div class="app" role="application" aria-label="Anjali AI Valentine Bot">
      <div class="top">
        <div class="brand">ğŸ¤–ğŸ’˜ Anjali AI <span style="opacity:.7">Ã—</span> Shivam</div>
        <div class="pill" id="modePill">Mode: Cute â€¢ Funny â€¢ Slightly Evil (for NO button)</div>
      </div>

      <div class="main">
        <aside class="side">
          <div class="profile">
            <div class="avatar" aria-hidden="true"><span>ğŸ‘§ğŸ»</span></div>
            <div class="meta">
              <div class="name">Anjali AI</div>
              <div class="desc">Certified: Cute. Skills: Teasing. Specialty: Making Shivam blush.</div>
            </div>
          </div>

          <div class="profile">
            <div class="avatar" aria-hidden="true"><span>ğŸ‘¦ğŸ»</span></div>
            <div class="meta">
              <div class="name">Shivam</div>
              <div class="desc">Occupation: Missing Anjali. Hobbies: Bad jokes, big love, small drama.</div>
            </div>
          </div>

          <div class="stat">
            <b>Love Score</b>
            <div class="small">More cute answers = higher score. More sassy answers = faster NO button ğŸ˜ˆ</div>
            <div class="meter">
              <div class="bar"><i id="barFill"></i></div>
              <div class="score" id="score">â¤ï¸ 0</div>
            </div>
          </div>

          <div class="cards" id="cards">
            <div class="stat">
              <b>Mini Quest</b>
              <div class="small" id="quest">Survive the questions. Unlock the final proposal.</div>
            </div>
            <div class="stat">
              <b>Fun Controls</b>
              <div class="small">Tap â€œChaos Boostâ€ if Anjali tries to say NO too much ğŸ˜­</div>
              <div class="side-actions">
                <button class="ghost" id="boost">âš¡ Chaos Boost</button>
                <button class="ghost" id="reset">ğŸ” Restart</button>
              </div>
            </div>
            <div class="stat">
              <b>Disclaimer</b>
              <div class="small">This page may cause: smiling, blushing, and sudden ice-cream cravings.</div>
            </div>
          </div>
        </aside>

        <section class="chat">
          <div class="chat-head">
            <div class="botline">
              <div class="botbadge">ğŸ¤–</div>
              <div>
                <div style="font-weight:900; line-height:1.2">Anjali AI Girl Bot</div>
                <div class="status" id="status">Online â€¢ typing speed: adorable</div>
              </div>
            </div>
            <div class="pill" id="stepPill">Step 1/12</div>
          </div>

          <div class="msgs" id="msgs" aria-live="polite"></div>

          <div class="choices" id="choices">
            <div class="choice-row" id="choiceRow"></div>
            <div class="note" id="note">Pick a reply. (Yes, this is a test. No, you canâ€™t cheat.)</div>
          </div>
        </section>
      </div>

      <div class="top" style="border-top:1px solid var(--line); border-bottom:none">
        <div class="pill">Made with ğŸ’— by Shivam</div>
        <div class="pill">Tip: If you try to reject, the NO button becomes a ninja ğŸ¥·</div>
      </div>
    </div>
  </div>

  <!-- Finale Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Final Valentine Question">
    <div class="box">
      <h2>Final Boss Level ğŸ’</h2>
      <p id="finalText">Anjaliâ€¦ will you be my Valentine?</p>
      <div class="arena" id="arena">
        <button class="yes" id="finalYes">YES ğŸ’–</button>
        <button class="no" id="finalNo">NO ğŸ™ƒ</button>
      </div>
      <p style="margin-top:12px" class="note" id="finalHint">Try clicking NOâ€¦ if you can ğŸ˜ˆ</p>
    </div>
  </div>

  <div class="toast" id="toast">Nice try ğŸ˜Œ</div>

  <script>
    // ===== FX background =====
    const fx = document.getElementById('fx');
    const heartColors = ['#ff4d88','#ff9bbd','#ffd166','#7c4dff','#6ae4ff','#32d583'];

    function spawnHeart(){
      const h = document.createElement('div');
      h.className = 'heart';
      const c = heartColors[Math.floor(Math.random()*heartColors.length)];
      const left = Math.random()*100;
      const dur = 7 + Math.random()*8;
      const s = 0.55 + Math.random()*1.0;
      const x = (Math.random()*40 - 20) + 'vw';
      h.style.left = left + 'vw';
      h.style.bottom = (-10 - Math.random()*25) + 'vh';
      h.style.setProperty('--c', c);
      h.style.setProperty('--dur', dur + 's');
      h.style.setProperty('--s', s);
      h.style.setProperty('--x', x);
      fx.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000);
    }

    function spawnSpark(){
      const s = document.createElement('div');
      s.className = 'spark';
      s.textContent = ['âœ¨','ğŸ’«','â­','ğŸŒ¸','ğŸ’–'][Math.floor(Math.random()*5)];
      s.style.left = (Math.random()*100) + 'vw';
      s.style.top = (Math.random()*100) + 'vh';
      s.style.setProperty('--dur', (2.5 + Math.random()*3.5) + 's');
      fx.appendChild(s);
      setTimeout(()=>s.remove(), 6000);
    }

    for (let i=0;i<16;i++) setTimeout(spawnHeart, i*380);
    setInterval(spawnHeart, 650);
    for (let i=0;i<10;i++) setTimeout(spawnSpark, i*450);
    setInterval(spawnSpark, 1200);

    // ===== UI refs =====
    const msgs = document.getElementById('msgs');
    const choiceRow = document.getElementById('choiceRow');
    const note = document.getElementById('note');
    const stepPill = document.getElementById('stepPill');
    const status = document.getElementById('status');
    const modePill = document.getElementById('modePill');
    const quest = document.getElementById('quest');

    const barFill = document.getElementById('barFill');
    const scoreEl = document.getElementById('score');

    const boostBtn = document.getElementById('boost');
    const resetBtn = document.getElementById('reset');

    const toast = document.getElementById('toast');

    const modal = document.getElementById('modal');
    const arena = document.getElementById('arena');
    const finalYes = document.getElementById('finalYes');
    const finalNo = document.getElementById('finalNo');
    const finalHint = document.getElementById('finalHint');
    const finalText = document.getElementById('finalText');

    // ===== Helpers =====
    const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
    const rand = (a,b)=>Math.random()*(b-a)+a;

    function showToast(t){
      toast.textContent = t;
      toast.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toast.classList.remove('show'), 950);
    }

    function scrollToBottom(){
      msgs.scrollTop = msgs.scrollHeight;
    }

    function bubble(role, text){
      const wrap = document.createElement('div');
      wrap.className = 'msg ' + (role==='me' ? 'me' : 'bot');

      const ava = document.createElement('div');
      ava.className = 'miniava';
      ava.textContent = role==='me' ? 'ğŸ‘¦ğŸ»' : 'ğŸ‘§ğŸ»';

      const b = document.createElement('div');
      b.className = 'bubble';
      b.textContent = text;

      const stamp = document.createElement('div');
      stamp.className = 'stamp';
      stamp.textContent = role==='me' ? 'Shivam' : 'Anjali AI';

      wrap.appendChild(ava);
      wrap.appendChild(b);
      wrap.appendChild(stamp);
      msgs.appendChild(wrap);
      scrollToBottom();
    }

    function typing(on){
      status.textContent = on ? 'Online â€¢ typingâ€¦' : 'Online â€¢ typing speed: adorable';
      if (!on) return;
      const wrap = document.createElement('div');
      wrap.className = 'msg bot';
      wrap.id = 'typingRow';

      const ava = document.createElement('div');
      ava.className = 'miniava';
      ava.textContent = 'ğŸ‘§ğŸ»';

      const b = document.createElement('div');
      b.className = 'bubble';
      const t = document.createElement('span');
      t.className = 'typing';
      t.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      b.appendChild(t);

      wrap.appendChild(ava);
      wrap.appendChild(b);
      msgs.appendChild(wrap);
      scrollToBottom();
    }

    function stopTyping(){
      status.textContent = 'Online â€¢ typing speed: adorable';
      const row = document.getElementById('typingRow');
      if (row) row.remove();
    }

    function setChoices(options){
      choiceRow.innerHTML = '';
      options.forEach(o=>{
        const btn = document.createElement('button');
        btn.className = `btn ${o.kind||''}`;
        btn.textContent = o.t;
        btn.onclick = ()=>choose(o);
        choiceRow.appendChild(btn);
      });
    }

    // ===== Story engine =====
    let step = 0;
    let score = 0;
    let dodgeLevel = 1;

    const STEPS = [
      {
        bot: 'Hii Shivam ğŸ˜Œ Iâ€™m Anjali AI Girl Bot. Before I approve your Valentine request, I needâ€¦ questions ğŸ˜ˆ',
        choices: [
          {t:'Ok maâ€™am. I am ready ğŸ«¡', kind:'good', me:'Ok maâ€™am. I am ready ğŸ«¡', bot2:'Good boy. First question loadingâ€¦ ğŸ’¾', add:2},
          {t:'Iâ€™m scared ğŸ˜­', kind:'spicy', me:'Iâ€™m scared ğŸ˜­', bot2:'Donâ€™t worry. I only biteâ€¦ chocolates ğŸ« (sometimes).', add:1},
          {t:'Bribe you with ice cream? ğŸ¦', kind:'good', me:'Bribe you with ice cream? ğŸ¦', bot2:'Accepted. You may proceed. Ice cream is non-negotiable.', add:2},
        ]
      },
      {
        bot: 'Question 1/10: If I say â€œI miss youâ€â€¦ what do you reply?',
        choices: [
          {t:'â€œCome here, Iâ€™ll fix itâ€ ğŸ«‚', kind:'good', me:'â€œCome here, Iâ€™ll fix itâ€ ğŸ«‚', bot2:'Awww. Thatâ€™s premium boyfriend energy. +2 â¤ï¸', add:2},
          {t:'â€œSameâ€ and run away ğŸƒâ€â™‚ï¸ğŸ’¨', kind:'spicy', me:'â€œSameâ€ and run away ğŸƒâ€â™‚ï¸ğŸ’¨', bot2:'Sassy. I like it. But I will chase you. +1 â¤ï¸', add:1},
          {t:'Send 47 memes ğŸ˜‚', kind:'good', me:'Send 47 memes ğŸ˜‚', bot2:'Perfect. Love language: memes and chaos. +2 â¤ï¸', add:2},
        ]
      },
      {
        bot: 'Question 2/10: Choose our date vibe.',
        choices: [
          {t:'Walk + ice cream + hand holding ğŸ¦ğŸ¤', kind:'good', me:'Walk + ice cream + hand holding ğŸ¦ğŸ¤', bot2:'Classic romance. Approved. +2 â¤ï¸', add:2},
          {t:'Netflix + snacks + cuddle ğŸŒ™', kind:'good', me:'Netflix + snacks + cuddle ğŸŒ™', bot2:'Cuddle protocol activated. +2 â¤ï¸', add:2},
          {t:'Surprise me ğŸ˜ˆ', kind:'spicy', me:'Surprise me ğŸ˜ˆ', bot2:'Oh? I love surprises. Also I love being the boss. +1 â¤ï¸', add:1, boostNo:true},
        ]
      },
      {
        bot: 'Question 3/10: How would you describe Shivamâ€™s jokes?',
        choices: [
          {t:'So badâ€¦ itâ€™s cute ğŸ˜‚', kind:'good', me:'So badâ€¦ itâ€™s cute ğŸ˜‚', bot2:'Correct. Bad jokes are a feature, not a bug. +2 â¤ï¸', add:2},
          {t:'10/10 comedy king ğŸ˜', kind:'spicy', me:'10/10 comedy king ğŸ˜', bot2:'Flattery detected. Iâ€™m blushing. +1 â¤ï¸', add:1},
          {t:'Please stop ğŸ˜­', kind:'danger', me:'Please stop ğŸ˜­', bot2:'Ouch. I will reduce jokes to 3 per hour. +0 â¤ï¸', add:0, boostNo:true}
        ]
      },
      {
        bot: 'Question 4/10: If Iâ€™m upset, whatâ€™s your best move?',
        choices: [
          {t:'Hug + sorry + listen ğŸ«‚', kind:'good', me:'Hug + sorry + listen ğŸ«‚', bot2:'Thatâ€™s mature and cute. +2 â¤ï¸', add:2},
          {t:'Bring snacks ğŸŸ', kind:'good', me:'Bring snacks ğŸŸ', bot2:'Food therapy? Approved. +2 â¤ï¸', add:2},
          {t:'Roast me until I laugh ğŸ˜ˆ', kind:'spicy', me:'Roast me until I laugh ğŸ˜ˆ', bot2:'Violenceâ€¦ but make it romantic. +1 â¤ï¸', add:1, boostNo:true},
        ]
      },
      {
        bot: 'Question 5/10: Choose a cute nickname for Anjali.',
        choices: [
          {t:'â€œAnjuâ€ ğŸ¥º', kind:'good', me:'â€œAnjuâ€ ğŸ¥º', bot2:'Cute. Tiny heart explosion. +2 â¤ï¸', add:2},
          {t:'â€œBoss Ladyâ€ ğŸ‘‘', kind:'spicy', me:'â€œBoss Ladyâ€ ğŸ‘‘', bot2:'Correct. I am the boss. +1 â¤ï¸', add:1},
          {t:'â€œMy Homeâ€ ğŸ¡', kind:'good', me:'â€œMy Homeâ€ ğŸ¡', bot2:'Okay why is this so sweet??? +3 â¤ï¸', add:3},
        ]
      },
      {
        bot: 'Question 6/10: If we fight, weâ€¦',
        choices: [
          {t:'Talk it out calmly ğŸ¤', kind:'good', me:'Talk it out calmly ğŸ¤', bot2:'Green flag. Huge. +2 â¤ï¸', add:2},
          {t:'Say â€œsorryâ€ first (even if Iâ€™m right) ğŸ˜­', kind:'good', me:'Say â€œsorryâ€ first (even if Iâ€™m right) ğŸ˜­', bot2:'This is loveâ€¦ and also bravery. +2 â¤ï¸', add:2},
          {t:'Send a meme apology ğŸ˜‚', kind:'spicy', me:'Send a meme apology ğŸ˜‚', bot2:'Acceptable. Meme diplomacy works. +1 â¤ï¸', add:1}
        ]
      },
      {
        bot: 'Question 7/10: Pick a romantic superpower.',
        choices: [
          {t:'Teleport to you instantly ğŸŒ€', kind:'good', me:'Teleport to you instantly ğŸŒ€', bot2:'Instant hugs? YES. +2 â¤ï¸', add:2},
          {t:'Unlimited chocolates ğŸ«â™¾ï¸', kind:'good', me:'Unlimited chocolates ğŸ«â™¾ï¸', bot2:'Correct. You understand priorities. +2 â¤ï¸', add:2},
          {t:'Read your mind ğŸ˜ˆ', kind:'spicy', me:'Read your mind ğŸ˜ˆ', bot2:'Nope. Too dangerous. I have secrets. +1 â¤ï¸', add:1, boostNo:true}
        ]
      },
      {
        bot: 'Question 8/10: One sentence about me?',
        choices: [
          {t:'â€œYouâ€™re my peaceâ€ ğŸŒ™', kind:'good', me:'â€œYouâ€™re my peaceâ€ ğŸŒ™', bot2:'Aaaa. Sweetness overload. +3 â¤ï¸', add:3},
          {t:'â€œYouâ€™re my favourite problemâ€ ğŸ˜ˆ', kind:'spicy', me:'â€œYouâ€™re my favourite problemâ€ ğŸ˜ˆ', bot2:'Sassy romance. Approved. +1 â¤ï¸', add:1},
          {t:'â€œYouâ€™re my luckâ€ ğŸ€', kind:'good', me:'â€œYouâ€™re my luckâ€ ğŸ€', bot2:'So cute. +2 â¤ï¸', add:2}
        ]
      },
      {
        bot: 'Question 9/10: Do you hold my hand in public?',
        choices: [
          {t:'Yes, proudly ğŸ¤', kind:'good', me:'Yes, proudly ğŸ¤', bot2:'Hand-holding confirmed. +2 â¤ï¸', add:2},
          {t:'Only if you behave ğŸ˜Œ', kind:'spicy', me:'Only if you behave ğŸ˜Œ', bot2:'Deal. Iâ€™ll behaveâ€¦ for 3 minutes. +1 â¤ï¸', add:1},
          {t:'If bribed with ice cream ğŸ¦', kind:'good', me:'If bribed with ice cream ğŸ¦', bot2:'Bribe accepted. +2 â¤ï¸', add:2}
        ]
      },
      {
        bot: 'Question 10/10 (Important): Do you like Shivam?',
        choices: [
          {t:'YES â¤ï¸', kind:'good', me:'YES â¤ï¸', bot2:'Correct answer. Universe approved. +3 â¤ï¸', add:3},
          {t:'A LOT ğŸ˜­ğŸ’˜', kind:'good', me:'A LOT ğŸ˜­ğŸ’˜', bot2:'Shivam is now a happy idiot. +4 â¤ï¸', add:4},
          {t:'No ğŸ™ƒ', kind:'danger', me:'No ğŸ™ƒ', bot2:'Interesting choiceâ€¦ The NO button later will become a ninja. +0 â¤ï¸', add:0, boostNo:true, bigBoost:true}
        ]
      },
      {
        bot: 'Processing resultsâ€¦ ğŸ’—',
        choices: [
          {t:'Show results ğŸ˜­', kind:'good', me:'Show results ğŸ˜­', bot2:'Final verdict: You two are dangerously cute together. Unlocking final bossâ€¦', add:0}
        ]
      }
    ];

    function updateScore(){
      scoreEl.textContent = `â¤ï¸ ${score}`;
      const pct = clamp(Math.round((score/24)*100), 0, 100);
      barFill.style.width = pct + '%';
      quest.textContent = step < 11 ? `Answering question ${Math.min(step+1,10)}/10â€¦` : 'Final boss unlocked. Donâ€™t panic.';
      stepPill.textContent = `Step ${Math.min(step+1,12)}/12`;
    }

    function choose(o){
      // user bubble
      bubble('me', o.me);

      // scoring + NO button chaos
      score += (o.add||0);
      if (o.boostNo) dodgeLevel = clamp(dodgeLevel + (o.bigBoost ? 2 : 1), 1, 5);
      if (!o.boostNo && Math.random() < 0.20) dodgeLevel = clamp(dodgeLevel+1,1,5);

      modePill.textContent = `Mode: Cute â€¢ Funny â€¢ NO Level ${dodgeLevel}`;
      updateScore();

      // bot typing then reply
      setChoices([]);
      note.textContent = 'Anjali AI is thinkingâ€¦ (judging a little)';
      typing(true);

      setTimeout(()=>{
        stopTyping();
        bubble('bot', o.bot2);

        // next step
        step++;
        if (step >= STEPS.length) step = STEPS.length-1;

        // special transition to finale
        if (step === 11) {
          setTimeout(openFinale, 700);
          note.textContent = 'Final boss incomingâ€¦';
          setChoices([{t:'Iâ€™m ready ğŸ˜­', kind:'good', me:'Iâ€™m ready ğŸ˜­', bot2:'Letâ€™s goooo.', add:0}]);
          return;
        }

        loadStep();
      }, 650 + Math.random()*350);
    }

    function loadStep(){
      updateScore();
      const s = STEPS[step];
      typing(true);
      setChoices([]);
      note.textContent = 'Waitâ€¦ sheâ€™s typing ğŸ˜³';

      setTimeout(()=>{
        stopTyping();
        bubble('bot', s.bot);
        setChoices(s.choices);
        note.textContent = 'Pick a reply (choose wisely ğŸ˜ˆ)';
      }, 650 + Math.random()*450);
    }

    // Start conversation
    bubble('bot', 'ğŸ’Œ Booting up Anjali AIâ€¦');
    setTimeout(()=>{
      bubble('bot', 'System note: Shivam is smiling already.');
      loadStep();
    }, 500);

    // ===== Buttons: Boost + reset =====
    boostBtn.addEventListener('click', ()=>{
      dodgeLevel = clamp(dodgeLevel+1,1,5);
      modePill.textContent = `Mode: Cute â€¢ Funny â€¢ NO Level ${dodgeLevel}`;
      showToast('Chaos Boost activated âš¡');
    });

    resetBtn.addEventListener('click', ()=>{
      // quick reset (soft)
      location.reload();
    });

    // ===== Finale modal + ninja NO button =====
    let lastMove = 0;

    function openFinale(){
      modal.style.display = 'grid';
      finalText.textContent = `Anjaliâ€¦ will you be my Valentine?`; 
      finalHint.textContent = 'Try clicking NOâ€¦ if you can ğŸ˜ˆ';
      placeNo(true);
      showToast('Final Boss Level Unlocked ğŸ’');
    }

    function placeNo(force=false){
      const now = Date.now();
      if (!force && now - lastMove < 85) return;
      lastMove = now;

      const r = arena.getBoundingClientRect();
      const bw = finalNo.offsetWidth;
      const bh = finalNo.offsetHeight;
      const pad = 10;
      const maxX = r.width - bw - pad;
      const maxY = r.height - bh - pad - 56; // keep away from YES

      const x = rand(pad, Math.max(pad, maxX));
      const y = rand(pad, Math.max(pad, maxY));

      finalNo.style.left = x + 'px';
      finalNo.style.top  = y + 'px';
      finalNo.style.transform = `rotate(${rand(-10,10)}deg)`;
    }

    function escalateNo(){
      const lines = [
        'NO button: â€œIâ€™m shy ğŸ™ˆâ€',
        'NO button: â€œCatch me if you can ğŸ˜¼â€',
        'NO button: â€œI have plansâ€¦ elsewhere ğŸƒâ€â™‚ï¸ğŸ’¨â€',
        'NO button: â€œError 404: NO not found ğŸ˜Œâ€',
        'NO button: â€œStop chasing me, choose YES ğŸ˜­â€'
      ];
      finalHint.textContent = lines[dodgeLevel-1];
    }

    function dodge(e){
      placeNo();
      if (Math.random() < (0.22 + dodgeLevel*0.10)) {
        dodgeLevel = clamp(dodgeLevel+1,1,5);
        modePill.textContent = `Mode: Cute â€¢ Funny â€¢ NO Level ${dodgeLevel}`;
        escalateNo();
      }
      if (dodgeLevel >= 4 && Math.random() < 0.35) {
        showToast('NOpe. This button is in a relationship with chaos ğŸ˜ˆ');
      }
      e.preventDefault?.();
    }

    finalNo.addEventListener('mouseenter', dodge);
    finalNo.addEventListener('mousemove', ()=>{ if (dodgeLevel>=3) placeNo(); });
    finalNo.addEventListener('touchstart', (e)=>{ dodge(e); showToast('Nice try ğŸ˜Œ'); }, {passive:false});
    finalNo.addEventListener('click', (e)=>{ e.preventDefault(); placeNo(true); showToast('Not today ğŸ˜Œ'); dodgeLevel=clamp(dodgeLevel+1,1,5); escalateNo(); });

    // ===== Confetti =====
    function confetti(){
      const count = 95;
      for (let i=0;i<count;i++){
        const p = document.createElement('div');
        p.textContent = ['ğŸ’–','âœ¨','ğŸ‰','ğŸ’˜','ğŸŒ¸','ğŸ«','ğŸ§¸','ğŸ˜'][Math.floor(Math.random()*8)];
        p.style.position = 'fixed';
        p.style.left = (Math.random()*100) + 'vw';
        p.style.top = (-10) + 'vh';
        p.style.fontSize = (14 + Math.random()*22) + 'px';
        p.style.zIndex = 10001;
        p.style.transition = 'transform 1.3s ease, opacity 1.3s ease';
        p.style.opacity = '1';
        document.body.appendChild(p);
        const tx = (Math.random()*70 - 35) + 'vw';
        const ty = (Math.random()*90 + 60) + 'vh';
        const rot = (Math.random()*720 - 360);
        setTimeout(()=>{ p.style.transform = `translate(${tx}, ${ty}) rotate(${rot}deg)`; p.style.opacity = '0'; }, 10);
        setTimeout(()=>p.remove(), 1400);
      }
    }

    finalYes.addEventListener('click', ()=>{
      confetti();
      showToast('She said YES ğŸ’–');
      finalText.textContent = 'YAYYY! Itâ€™s official ğŸ’–';
      finalHint.textContent = 'Anjali said YES! Shivam is now 100% happy and 0% calm. Ice cream time ğŸ¦';
      // lock NO
      finalNo.style.display = 'none';
      finalYes.textContent = 'Celebrate again ğŸ‰';
      finalYes.onclick = ()=>{ confetti(); showToast('Celebration mode ON ğŸ‰'); };
    });

    window.addEventListener('resize', ()=>{ if (modal.style.display==='grid') placeNo(true); });

    // Keyboard chaos block
    document.addEventListener('keydown', (e)=>{
      if (modal.style.display==='grid' && e.key.toLowerCase()==='n'){
        placeNo(true);
        showToast('Keyboard shortcut blocked ğŸ˜Œ');
        dodgeLevel = clamp(dodgeLevel+1,1,5);
        escalateNo();
      }
    });
  </script>
</body>
</html>
